"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[707],{9183:(e,t,l)=>{l.d(t,{j:()=>a});var n=l(8222);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,l=(0,n.ref)(null),a=(0,n.ref)(null),r=(0,n.ref)(t),o=(0,n.ref)([]);function c(e){e.forEach((function(e){e.name=e.fname,1==e.level&&d(e,11),2==e.level&&u.value>1&&d(e,11),3==e.level&&u.value>2&&d(e,10),4==e.level&&u.value>3&&d(e,10),5==e.level&&u.value>4&&d(e,8),6==e.level&&u.value>5&&d(e,8),7==e.level&&u.value>6&&d(e,8),8==e.level&&u.value>7&&d(e,7),9==e.level&&u.value>8&&d(e,7),e.children=e.children.filter((function(t){return e.id==t.parent_id})),e.childrenCount=e.children.length,o.value.push(e),c(e.children)}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;axios.get("getusers/".concat(e)).then((function(e){var t=e.data;a.value=t,c(t.children)}))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;axios.get("getusers/".concat(e,"/").concat(t)).then((function(e){var t=e.data;a.value=t,c(t.children)}))}e?s(r.value,e):i(r.value);var u=(0,n.computed)((function(){var e,t,l=null===(e=a.value)||void 0===e?void 0:e.children.filter((function(e){return e.total>=30})).length,n=null===(t=a.value)||void 0===t?void 0:t.total,r=function(){var e,t=0;return null===(e=a.value)||void 0===e||e.children.forEach((function(e,l,n){n.length>4&&n.filter((function(e){return e.summaBranch>=25e3})).length>4?t=9:n.length>3&&n.filter((function(e){return e.summaBranch>=5e3})).length>3?t=8:n.length>=3&&n.filter((function(e){return e.summaBranch>=2e3})).length>=3?t=7:n.length>=3&&n.filter((function(e){return e.summaBranch>=600})).length>=3?t=6:n.length>=2&&n.filter((function(e){return e.summaBranch>=300})).length>=2?t=5:n.length>=2&&n.filter((function(e){return e.summaBranch>=100})).length>=2&&(t=4)})),t}();return l>=9&&n>=5e3&&9==r?9:l>=8&&n>=2500&&r>=8?8:l>=7&&n>=1200&&r>=7?7:l>=6&&n>=600&&r>=6?6:l>=5&&n>=250&&r>=5?5:l>=4&&n>=120&&r>=4?4:l>=3&&n>=60?3:l>=2?2:1}));function d(e,t){var n=+e.total/100*t;e.procent=Math.round(100*n)/100/2,l.value+=e.procent}return{users:o,levels:u,totalPrice:l,user:a,period:r,changePeriod:function(){l.value=null,e?s(r.value,e):i(r.value)},getSelectedPeoples:s}}},3623:(e,t,l)=>{l.d(t,{Z:()=>r});var n=l(3645),a=l.n(n)()((function(e){return e[1]}));a.push([e.id,".tree-container .link{stroke-width:1px!important;stroke:#ee5fa6!important}",""]);const r=a},707:(e,t,l)=>{l.r(t),l.d(t,{default:()=>W});var n=l(8222),a=l(1207),r=l.n(a),o=(l(8033),l(9183)),c={class:"flex flex-col h-full"},i={class:"text-xl font-semibold"},s=(0,n.createElementVNode)("span",null,"Квалификация",-1),u={class:"text-teal-500 pl-2"},d={class:"text-xl font-semibold"},f=(0,n.createElementVNode)("span",null,"Сумма за расчётный период",-1),m={class:"text-teal-500 pl-2"},v={class:"flex justify-between mb-5 items-end"},h=(0,n.createElementVNode)("span",{class:"font-semibold"},"Расчётный период",-1),p={class:"pl-2"},g={class:"flex flex-col"},x=(0,n.createElementVNode)("label",{for:"period",class:"text-gray-500 mb-1 w-full inline-block text-right text-sm"},"Период",-1),E=["value"],V={class:"flex-grow flex flex-col relative"},N={class:"pb-3 absolute top-2 left-2 z-50 inline-block"},b=[(0,n.createElementVNode)("i",{class:"fal fa-search-plus text-gray-600"},null,-1)],k=[(0,n.createElementVNode)("i",{class:"fal fa-search-minus text-gray-600"},null,-1)],y={class:"bg-white border-t-2 border-pink-500 w-44 px-2 pt-1 pb-2 shadow relative"},w={class:"flex flex-col px-1"},B={class:"flex justify-between items-center w-full leading-none"},C={class:"text-gray-500 text-md font-semibold"},S={key:0,class:"text-gray-400 text-sm",title:"Объём Ветки"},D={class:"text-right leading-none mb-1.5"},P={class:"text-pink-500 text-md"},j={class:"flex justify-between items-center w-full leading-[5px]"},_=(0,n.createElementVNode)("p",{class:"text-gray-400 text-sm"},"Покупка",-1),z={class:"text-gray-500 text-xs"},M={key:0,class:"text-right"},Z=(0,n.createElementVNode)("p",{class:"text-gray-400 text-sm",title:"Универсальный бонус"},"У.Б",-1),$={class:"text-gray-500 text-xs"},H={key:0,class:"absolute right-1/2 bottom-0 translate-x-1/2"},F=[(0,n.createElementVNode)("i",{class:"fal fa-angle-down leading-none relative top-[5px] text-pink-500"},null,-1)];const I={__name:"MyPeoples",setup:function(e){var t=(0,n.reactive)({name:null,children:[]}),l=(0,o.j)(null,store.state.user.lastPeriod),a=l.levels,I=l.totalPrice,L=l.user,O=l.period,R=l.changePeriod,U=(0,n.ref)(null);return(0,n.watch)((function(){return L.value}),(function(){t.name=L.value.fname,t.total=L.value.periodSumma,t.children=L.value.children,t.childrenCount=L.value.children.length})),function(e,l){var o,W;return(0,n.openBlock)(),(0,n.createElementBlock)("div",c,[(0,n.createElementVNode)("header",null,[(0,n.createElementVNode)("h3",i,[s,(0,n.createElementVNode)("span",u,(0,n.toDisplayString)(e.$store.state.statuses[(0,n.unref)(a)-1]),1)]),(0,n.createElementVNode)("h3",d,[f,(0,n.createElementVNode)("span",m,(0,n.toDisplayString)((0,n.unref)(I)),1)]),(0,n.createElementVNode)("main",v,[(0,n.createElementVNode)("div",null,[h,(0,n.createElementVNode)("span",p,(0,n.toDisplayString)(null===(o=(0,n.unref)(L))||void 0===o?void 0:o.days[0])+" - "+(0,n.toDisplayString)(null===(W=(0,n.unref)(L))||void 0===W?void 0:W.days[1]),1)]),(0,n.createElementVNode)("div",g,[x,(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"period","onUpdate:modelValue":l[0]||(l[0]=function(e){return(0,n.isRef)(O)?O.value=e:null}),onChange:l[1]||(l[1]=function(){return(0,n.unref)(R)&&(0,n.unref)(R).apply(void 0,arguments)}),class:"border-b outline-none px-2 py-0.5"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.$store.state.user.lastPeriod,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{value:e},(0,n.toDisplayString)(e)+" Период",9,E)})),256))],544),[[n.vModelSelect,(0,n.unref)(O)]])])])]),(0,n.createElementVNode)("section",V,[(0,n.createElementVNode)("div",N,[(0,n.createElementVNode)("button",{onClick:l[2]||(l[2]=function(e){return U.value.zoomIn()}),class:"w-10 h-10 bg-white rounded-full shadow hover:bg-orange-100 active:bg-orange-50 mr-2"},b),(0,n.createElementVNode)("button",{onClick:l[3]||(l[3]=function(e){return U.value.zoomOut()}),class:"w-10 h-10 bg-white rounded-full shadow hover:bg-orange-100 active:bg-orange-50"},k)]),(0,n.unref)(L)?((0,n.openBlock)(),(0,n.createBlock)((0,n.unref)(r()),{key:0,ref_key:"tree",ref:U,class:"bg-stone-50 w-full shadow-inner h-[600px]",dataset:t,config:{nodeWidth:200,nodeHeight:100,levelHeight:180},linkStyle:"straight"},{node:(0,n.withCtx)((function(e){var t=e.node,l=e.collapsed;return[(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("main",w,[(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("span",C,(0,n.toDisplayString)(t.name),1),t.summaBranch?((0,n.openBlock)(),(0,n.createElementBlock)("span",S,"О.В")):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("div",D,[(0,n.createElementVNode)("span",P,(0,n.toDisplayString)(t.summaBranch),1)]),(0,n.createElementVNode)("div",j,[(0,n.createElementVNode)("header",null,[_,(0,n.createElementVNode)("span",z,"$"+(0,n.toDisplayString)(t.total),1)]),t.procent?((0,n.openBlock)(),(0,n.createElementBlock)("footer",M,[Z,(0,n.createElementVNode)("span",$,(0,n.toDisplayString)(t.procent),1)])):(0,n.createCommentVNode)("",!0)])]),t.childrenCount>0&&l?((0,n.openBlock)(),(0,n.createElementBlock)("span",H,F)):(0,n.createCommentVNode)("",!0)])]})),_:1},8,["dataset"])):(0,n.createCommentVNode)("",!0)])])}}};var L=l(3379),O=l.n(L),R=l(3623),U={insert:"head",singleton:!1};O()(R.Z,U);R.Z.locals;const W=I}}]);