"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[734],{9183:(e,l,t)=>{t.d(l,{j:()=>a});var n=t(8222);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1?arguments[1]:void 0,t=(0,n.ref)(null),a=(0,n.ref)(null),r=(0,n.ref)(l),o=(0,n.ref)([]);function u(e){e.forEach((function(e){e.name=e.fname,1==e.level&&d(e,11),2==e.level&&s.value>1&&d(e,11),3==e.level&&s.value>2&&d(e,10),4==e.level&&s.value>3&&d(e,10),5==e.level&&s.value>4&&d(e,8),6==e.level&&s.value>5&&d(e,8),7==e.level&&s.value>6&&d(e,8),8==e.level&&s.value>7&&d(e,7),9==e.level&&s.value>8&&d(e,7),e.children=e.children.filter((function(l){return e.id==l.parent_id})),e.childrenCount=e.children.length,o.value.push(e),u(e.children)}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;axios.get("getusers/".concat(e)).then((function(e){var l=e.data;a.value=l,u(l.children)}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1?arguments[1]:void 0;axios.get("getusers/".concat(e,"/").concat(l)).then((function(e){var l=e.data;a.value=l,u(l.children)}))}e?c(r.value,e):i(r.value);var s=(0,n.computed)((function(){var e,l,t=null===(e=a.value)||void 0===e?void 0:e.children.filter((function(e){return e.total>=30})).length,n=null===(l=a.value)||void 0===l?void 0:l.total,r=function(){var e,l=0;return null===(e=a.value)||void 0===e||e.children.forEach((function(e,t,n){n.length>4&&n.filter((function(e){return e.summaBranch>=25e3})).length>4?l=9:n.length>3&&n.filter((function(e){return e.summaBranch>=5e3})).length>3?l=8:n.length>=3&&n.filter((function(e){return e.summaBranch>=2e3})).length>=3?l=7:n.length>=3&&n.filter((function(e){return e.summaBranch>=600})).length>=3?l=6:n.length>=2&&n.filter((function(e){return e.summaBranch>=300})).length>=2?l=5:n.length>=2&&n.filter((function(e){return e.summaBranch>=100})).length>=2&&(l=4)})),l}();return t>=9&&n>=5e3&&9==r?9:t>=8&&n>=2500&&r>=8?8:t>=7&&n>=1200&&r>=7?7:t>=6&&n>=600&&r>=6?6:t>=5&&n>=250&&r>=5?5:t>=4&&n>=120&&r>=4?4:t>=3&&n>=60?3:t>=2?2:1}));function d(e,l){var n=+e.total/100*l;e.procent=Math.round(100*n)/100/2,t.value+=e.procent}return{users:o,levels:s,totalPrice:t,user:a,period:r,changePeriod:function(){t.value=null,e?c(r.value,e):i(r.value)},getSelectedPeoples:c}}},6609:(e,l,t)=>{t.d(l,{Z:()=>r});var n=t(3645),a=t.n(n)()((function(e){return e[1]}));a.push([e.id,".tree-container .link{stroke-width:1px!important;stroke:#ee5fa6!important}",""]);const r=a},3351:(e,l,t)=>{t.r(l),t.d(l,{default:()=>k});var n=t(8222),a=(t(8033),t(9183)),r={class:"flex flex-col h-full"},o={class:"text-xl font-semibold"},u=(0,n.createElementVNode)("span",null,"Квалификация",-1),i={class:"text-teal-500 pl-2"},c={class:"text-xl font-semibold"},s=(0,n.createElementVNode)("span",null,"Сумма за расчётный период",-1),d={class:"text-teal-500 pl-2"},f={class:"flex justify-between mb-5 items-end"},v=(0,n.createElementVNode)("span",{class:"font-semibold"},"Расчётный период",-1),h={class:"pl-2"},m={class:"flex flex-col"},p=(0,n.createElementVNode)("label",{for:"period",class:"text-gray-500 mb-1 w-full inline-block text-right text-sm"},"Период",-1),g=["value"],x={class:"flex-grow flex flex-col"};const N={__name:"MyPeoplesTable",setup:function(e){var l=(0,n.reactive)({name:null,children:[]}),t=(0,a.j)(null,store.state.user.lastPeriod),N=t.users,E=t.levels,w=t.totalPrice,V=t.user,b=t.period,k=t.changePeriod;(0,n.watch)((function(){return V.value}),(function(){l.name=V.value.fname,l.total=V.value.periodSumma,l.children=V.value.children,l.childrenCount=V.value.children.length}));var y=(0,n.reactive)([{headerName:"T/r",valueGetter:"node.rowIndex + 1",width:90},{headerName:"Имя ",field:"fname",width:120},{headerName:"Фамилия ",field:"lname",width:120},{headerName:"Степень",field:"level"},{headerName:"Сумма",field:"total"},{headerName:"Процент",field:"procent",flex:1}]),B={sortable:!0,filter:!0};return function(e,l){var t,a,D=(0,n.resolveComponent)("ag-grid-vue");return(0,n.openBlock)(),(0,n.createElementBlock)("div",r,[(0,n.createElementVNode)("header",null,[(0,n.createElementVNode)("h3",o,[u,(0,n.createElementVNode)("span",i,(0,n.toDisplayString)(e.$store.state.statuses[(0,n.unref)(E)-1]),1)]),(0,n.createElementVNode)("h3",c,[s,(0,n.createElementVNode)("span",d,(0,n.toDisplayString)((0,n.unref)(w)),1)]),(0,n.createElementVNode)("main",f,[(0,n.createElementVNode)("div",null,[v,(0,n.createElementVNode)("span",h,(0,n.toDisplayString)(null===(t=(0,n.unref)(V))||void 0===t?void 0:t.days[0])+" - "+(0,n.toDisplayString)(null===(a=(0,n.unref)(V))||void 0===a?void 0:a.days[1]),1)]),(0,n.createElementVNode)("div",m,[p,(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"period","onUpdate:modelValue":l[0]||(l[0]=function(e){return(0,n.isRef)(b)?b.value=e:null}),onChange:l[1]||(l[1]=function(){return(0,n.unref)(k)&&(0,n.unref)(k).apply(void 0,arguments)}),class:"border-b outline-none px-2 py-0.5"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.$store.state.user.lastPeriod,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{value:e},(0,n.toDisplayString)(e)+" Период",9,g)})),256))],544),[[n.vModelSelect,(0,n.unref)(b)]])])])]),(0,n.createElementVNode)("section",x,[(0,n.createVNode)(D,{class:"ag-theme-material h-96 w-full shadow border-0",columnDefs:y,rowData:(0,n.unref)(N),defaultColDef:B,animateRows:"true",rowSelection:"multiple"},null,8,["columnDefs","rowData"])])])}}};var E=t(3379),w=t.n(E),V=t(6609),b={insert:"head",singleton:!1};w()(V.Z,b);V.Z.locals;const k=N}}]);