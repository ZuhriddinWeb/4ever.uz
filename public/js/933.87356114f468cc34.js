"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[933],{5436:(e,t,n)=>{function l(e,t){return e.sort((function(e,t){return e-t})),e.slice(-t)}function r(e){var t=Math.pow(10,1);return Math.round(e*t)/t}n.d(t,{Q:()=>r,s:()=>l})},9183:(e,t,n)=>{n.d(t,{j:()=>u});var l=n(8222),r=n(5436);function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=(0,l.ref)(null),o=(0,l.ref)(null),u=(0,l.ref)(t),i=(0,l.ref)([]),c=(0,l.ref)([]),s=(0,l.ref)(0);function d(e){e.forEach((function(e){e.name=e.fname,1==e.level&&m(e,11),2==e.level&&h.value>1&&m(e,11),3==e.level&&h.value>2&&m(e,10),4==e.level&&h.value>3&&m(e,10),5==e.level&&h.value>4&&m(e,8),6==e.level&&h.value>5&&m(e,8),7==e.level&&h.value>6&&m(e,8),8==e.level&&h.value>7&&m(e,7),9==e.level&&h.value>8&&m(e,7),e.children=e.children.filter((function(t){return e.id==t.parent_id})),e.childrenCount=e.children.length,v.value&&e.level>5&&(e.liderBonus=+e.total*(v.value/100),s.value+=e.liderBonus),i.value.push(e),d(e.children)}))}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;axios.get("getusers/".concat(e,"/").concat(t)).then((function(e){var t=e.data;o.value=t,d(t.children)}))}axios.get("lidershipbonus").then((function(t){var n=t.data;c.value=n,f(u.value,e)}));var v=(0,l.computed)((function(){if(o.value&&c.value.length){var e=0,t=o.value.children.map((function(e){return+e.summaBranch})),n=(0,r.s)(t,3);if(n.length<3)return 0;var l=Math.min.apply(Math,a(n));return c.value.forEach((function(t,n){var r=c.value[n+1]?c.value[n+1].ball:1/0;l>t.ball&&l<=r&&(e=t.prosent)})),e}})),h=(0,l.computed)((function(){var e,t,n=null===(e=o.value)||void 0===e?void 0:e.children.filter((function(e){return e.total>=30})).length,l=null===(t=o.value)||void 0===t?void 0:t.nlo,r=function(){var e,t=0;return null===(e=o.value)||void 0===e||e.children.forEach((function(e,n,l){l.length>4&&l.filter((function(e){return e.summaBranch>=25e3})).length>4?t=9:l.length>3&&l.filter((function(e){return e.summaBranch>=5e3})).length>3?t=8:l.length>=3&&l.filter((function(e){return e.summaBranch>=2e3})).length>=3?t=7:l.length>=3&&l.filter((function(e){return e.summaBranch>=600})).length>=3?t=6:l.length>=2&&l.filter((function(e){return e.summaBranch>=300})).length>=2?t=5:l.length>=2&&l.filter((function(e){return e.summaBranch>=100})).length>=2&&(t=4)})),t}();return n>=9&&l>=5e3&&9==r?9:n>=8&&l>=2500&&r>=8?8:n>=7&&l>=1200&&r>=7?7:n>=6&&l>=600&&r>=6?6:n>=5&&l>=250&&r>=5?5:n>=4&&l>=120&&r>=4?4:n>=3&&l>=60?3:n>=2?2:1}));function m(e,t){var l=+e.total/100*t;e.procent=Math.round(100*l)/100,n.value+=e.procent}return{users:i,levels:h,totalPrice:n,user:o,period:u,leaderBonus:s,getSelectedPeoples:f}}},5847:(e,t,n)=>{n.d(t,{Z:()=>a});var l=n(3645),r=n.n(l)()((function(e){return e[1]}));r.push([e.id,".tree-container .link{stroke-width:1px!important;stroke:#ee5fa6!important}",""]);const a=r},1933:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var l=n(8222),r=(n(8033),n(9183)),a={class:"flex flex-col h-full"},o=(0,l.createElementVNode)("h3",{class:"text-2xl text-gray-700 mb-4"},"Таблица",-1),u={class:"text-xl font-semibold"},i=(0,l.createElementVNode)("span",null,"Квалификация",-1),c={class:"text-teal-500 pl-2"},s={class:"text-xl font-semibold"},d=(0,l.createElementVNode)("span",null,"Сумма за расчётный период",-1),f={class:"text-teal-500 pl-2"},v={class:"flex justify-between mb-5 items-end"},h=(0,l.createElementVNode)("span",{class:"font-semibold"},"Расчётный период",-1),m={class:"pl-2"},p={class:"flex flex-col"},g=(0,l.createElementVNode)("label",{for:"period",class:"text-gray-500 mb-1 w-full inline-block text-right text-sm"},"Период",-1),b=["value"],y={class:"flex-grow flex flex-col"};const x={__name:"MyPeoplesTable",setup:function(e){var t=(0,l.reactive)({name:null,children:[]}),n=(0,r.j)(store.state.user.id,store.state.user.lastPeriod),x=n.users,E=n.levels,N=n.totalPrice,w=n.user,V=n.period,B=n.changePeriod;(0,l.watch)((function(){return w.value}),(function(){t.name=w.value.fname,t.total=w.value.periodSumma,t.children=w.value.children,t.childrenCount=w.value.children.length}));var k=(0,l.reactive)([{headerName:"T/r",valueGetter:"node.rowIndex + 1",width:90},{headerName:"Имя ",field:"fname",width:120},{headerName:"Фамилия ",field:"lname",width:120},{headerName:"Поколение ",field:"level"},{headerName:"Сумма",field:"total"},{headerName:"Процент",field:"procent",flex:1}]),S={sortable:!0,filter:!0};return function(e,t){var n,r,D=(0,l.resolveComponent)("ag-grid-vue");return(0,l.openBlock)(),(0,l.createElementBlock)("div",a,[o,(0,l.createElementVNode)("header",null,[(0,l.createElementVNode)("h3",u,[i,(0,l.createElementVNode)("span",c,(0,l.toDisplayString)(e.$store.state.statuses[(0,l.unref)(E)-1]),1)]),(0,l.createElementVNode)("h3",s,[d,(0,l.createElementVNode)("span",f,(0,l.toDisplayString)((0,l.unref)(N)),1)]),(0,l.createElementVNode)("main",v,[(0,l.createElementVNode)("div",null,[h,(0,l.createElementVNode)("span",m,(0,l.toDisplayString)(null===(n=(0,l.unref)(w))||void 0===n?void 0:n.days[0])+" - "+(0,l.toDisplayString)(null===(r=(0,l.unref)(w))||void 0===r?void 0:r.days[1]),1)]),(0,l.createElementVNode)("div",p,[g,(0,l.withDirectives)((0,l.createElementVNode)("select",{id:"period","onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,l.isRef)(V)?V.value=e:null}),onChange:t[1]||(t[1]=function(){return(0,l.unref)(B)&&(0,l.unref)(B).apply(void 0,arguments)}),class:"border-b outline-none px-2 py-0.5"},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.$store.state.user.lastPeriod,(function(e){return(0,l.openBlock)(),(0,l.createElementBlock)("option",{value:e},(0,l.toDisplayString)(e)+" Период ",9,b)})),256))],544),[[l.vModelSelect,(0,l.unref)(V)]])])])]),(0,l.createElementVNode)("section",y,[(0,l.createVNode)(D,{class:"ag-theme-material h-96 w-full shadow border-0",columnDefs:k,rowData:(0,l.unref)(x),defaultColDef:S,animateRows:"true",rowSelection:"multiple"},null,8,["columnDefs","rowData"])])])}}};var E=n(3379),N=n.n(E),w=n(5847),V={insert:"head",singleton:!1};N()(w.Z,V);w.Z.locals;const B=x}}]);