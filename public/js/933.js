"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[933],{9183:(e,l,t)=>{t.d(l,{j:()=>r});var n=t(8222);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1?arguments[1]:void 0,t=(0,n.ref)(null),r=(0,n.ref)(null),a=(0,n.ref)(l),o=(0,n.ref)([]);function u(e){e.forEach((function(e){e.name=e.fname,1==e.level&&s(e,11),2==e.level&&c.value>1&&s(e,11),3==e.level&&c.value>2&&s(e,10),4==e.level&&c.value>3&&s(e,10),5==e.level&&c.value>4&&s(e,8),6==e.level&&c.value>5&&s(e,8),7==e.level&&c.value>6&&s(e,8),8==e.level&&c.value>7&&s(e,7),9==e.level&&c.value>8&&s(e,7),e.children=e.children.filter((function(l){return e.id==l.parent_id})),e.childrenCount=e.children.length,o.value.push(e),u(e.children)}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1?arguments[1]:void 0;axios.get("getusers/".concat(e,"/").concat(l)).then((function(e){var l=e.data;r.value=l,u(l.children)}))}i(a.value,e);var c=(0,n.computed)((function(){var e,l,t=null===(e=r.value)||void 0===e?void 0:e.children.filter((function(e){return e.total>=30})).length,n=null===(l=r.value)||void 0===l?void 0:l.total,a=function(){var e,l=0;return null===(e=r.value)||void 0===e||e.children.forEach((function(e,t,n){n.length>4&&n.filter((function(e){return e.summaBranch>=25e3})).length>4?l=9:n.length>3&&n.filter((function(e){return e.summaBranch>=5e3})).length>3?l=8:n.length>=3&&n.filter((function(e){return e.summaBranch>=2e3})).length>=3?l=7:n.length>=3&&n.filter((function(e){return e.summaBranch>=600})).length>=3?l=6:n.length>=2&&n.filter((function(e){return e.summaBranch>=300})).length>=2?l=5:n.length>=2&&n.filter((function(e){return e.summaBranch>=100})).length>=2&&(l=4)})),l}();return t>=9&&n>=5e3&&9==a?9:t>=8&&n>=2500&&a>=8?8:t>=7&&n>=1200&&a>=7?7:t>=6&&n>=600&&a>=6?6:t>=5&&n>=250&&a>=5?5:t>=4&&n>=120&&a>=4?4:t>=3&&n>=60?3:t>=2?2:1}));function s(e,l){var n=+e.total/100*l;e.procent=Math.round(100*n)/100/2,t.value+=e.procent}return{users:o,levels:c,totalPrice:t,user:r,period:a,changePeriod:function(){t.value=null,i(a.value,e)},getSelectedPeoples:i}}},5847:(e,l,t)=>{t.d(l,{Z:()=>a});var n=t(3645),r=t.n(n)()((function(e){return e[1]}));r.push([e.id,".tree-container .link{stroke-width:1px!important;stroke:#ee5fa6!important}",""]);const a=r},1933:(e,l,t)=>{t.r(l),t.d(l,{default:()=>y});var n=t(8222),r=(t(8033),t(9183)),a={class:"flex flex-col h-full"},o=(0,n.createElementVNode)("h3",{class:"text-2xl text-gray-700 mb-4"},"Таблица",-1),u={class:"text-xl font-semibold"},i=(0,n.createElementVNode)("span",null,"Квалификация",-1),c={class:"text-teal-500 pl-2"},s={class:"text-xl font-semibold"},d=(0,n.createElementVNode)("span",null,"Сумма за расчётный период",-1),f={class:"text-teal-500 pl-2"},v={class:"flex justify-between mb-5 items-end"},h=(0,n.createElementVNode)("span",{class:"font-semibold"},"Расчётный период",-1),m={class:"pl-2"},p={class:"flex flex-col"},g=(0,n.createElementVNode)("label",{for:"period",class:"text-gray-500 mb-1 w-full inline-block text-right text-sm"},"Период",-1),x=["value"],N={class:"flex-grow flex flex-col"};const E={__name:"MyPeoplesTable",setup:function(e){var l=(0,n.reactive)({name:null,children:[]}),t=(0,r.j)(store.state.user.id,store.state.user.lastPeriod),E=t.users,w=t.levels,V=t.totalPrice,b=t.user,k=t.period,y=t.changePeriod;(0,n.watch)((function(){return b.value}),(function(){l.name=b.value.fname,l.total=b.value.periodSumma,l.children=b.value.children,l.childrenCount=b.value.children.length}));var B=(0,n.reactive)([{headerName:"T/r",valueGetter:"node.rowIndex + 1",width:90},{headerName:"Имя ",field:"fname",width:120},{headerName:"Фамилия ",field:"lname",width:120},{headerName:"Поколение ",field:"level"},{headerName:"Сумма",field:"total"},{headerName:"Процент",field:"procent",flex:1}]),D={sortable:!0,filter:!0};return function(e,l){var t,r,S=(0,n.resolveComponent)("ag-grid-vue");return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[o,(0,n.createElementVNode)("header",null,[(0,n.createElementVNode)("h3",u,[i,(0,n.createElementVNode)("span",c,(0,n.toDisplayString)(e.$store.state.statuses[(0,n.unref)(w)-1]),1)]),(0,n.createElementVNode)("h3",s,[d,(0,n.createElementVNode)("span",f,(0,n.toDisplayString)((0,n.unref)(V)),1)]),(0,n.createElementVNode)("main",v,[(0,n.createElementVNode)("div",null,[h,(0,n.createElementVNode)("span",m,(0,n.toDisplayString)(null===(t=(0,n.unref)(b))||void 0===t?void 0:t.days[0])+" - "+(0,n.toDisplayString)(null===(r=(0,n.unref)(b))||void 0===r?void 0:r.days[1]),1)]),(0,n.createElementVNode)("div",p,[g,(0,n.withDirectives)((0,n.createElementVNode)("select",{id:"period","onUpdate:modelValue":l[0]||(l[0]=function(e){return(0,n.isRef)(k)?k.value=e:null}),onChange:l[1]||(l[1]=function(){return(0,n.unref)(y)&&(0,n.unref)(y).apply(void 0,arguments)}),class:"border-b outline-none px-2 py-0.5"},[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.$store.state.user.lastPeriod,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{value:e},(0,n.toDisplayString)(e)+" Период ",9,x)})),256))],544),[[n.vModelSelect,(0,n.unref)(k)]])])])]),(0,n.createElementVNode)("section",N,[(0,n.createVNode)(S,{class:"ag-theme-material h-96 w-full shadow border-0",columnDefs:B,rowData:(0,n.unref)(E),defaultColDef:D,animateRows:"true",rowSelection:"multiple"},null,8,["columnDefs","rowData"])])])}}};var w=t(3379),V=t.n(w),b=t(5847),k={insert:"head",singleton:!1};V()(b.Z,k);b.Z.locals;const y=E}}]);